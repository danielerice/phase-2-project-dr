{"version":3,"file":"index.js","sources":["../dist-src/index.js"],"sourcesContent":["const {\n  loaderByName,\n  removeLoaders,\n  throwUnexpectedConfigError\n} = require(\"@craco/craco\");\n\nconst CracoLessPlugin = require(\"craco-less\");\n\nconst path = require(\"path\");\n\nconst overrideWebpackConfig = ({\n  context,\n  pluginOptions,\n  webpackConfig\n}) => {\n  pluginOptions = {\n    lessLoaderOptions: {\n      lessOptions: {\n        math: \"always\"\n      }\n    },\n    ...pluginOptions\n  }; // add alias to theme.config\n\n  webpackConfig.resolve.alias[\"../../theme.config$\"] = path.join(context.paths.appSrc, \"/semantic-ui/theme.config\");\n  const oneOfRule = webpackConfig.module.rules.find(rule => rule.oneOf);\n\n  if (!oneOfRule) {\n    throwUnexpectedConfigError({\n      packageName: \"@semantic-ui-react/craco-less\",\n      message: \"Can't find a 'oneOf' rule under module.rules in the \" + `${context.env} webpack config!`\n    });\n  }\n\n  const resourceLoader = oneOfRule.oneOf.find(({\n    type\n  }) => type === \"asset/resource\");\n\n  if (!resourceLoader) {\n    throwUnexpectedConfigError({\n      packageName: \"@semantic-ui-react/craco-less\",\n      message: \"Can't find a 'asset/resource' loader under module.rules in the \" + `${context.env} webpack config!`\n    });\n  }\n\n  resourceLoader.exclude.push(/theme.config$/);\n  resourceLoader.exclude.push(/\\.variables$/);\n  resourceLoader.exclude.push(/\\.overrides$/); // resolve-url-loader:\n  // should be removed as it causes bugs\n  // https://github.com/Semantic-Org/Semantic-UI-React/issues/3761\n\n  const {\n    hasRemovedAny\n  } = removeLoaders(webpackConfig, loaderByName(\"resolve-url-loader\"));\n\n  if (!hasRemovedAny) {\n    throwUnexpectedConfigError({\n      packageName: \"@semantic-ui-react/craco-less\",\n      message: `Can't find \"resolve-url-loader\" in the ${context.env} webpack config!`\n    });\n  } // less-loader:\n  // craco-less is reused\n\n\n  return CracoLessPlugin.overrideWebpackConfig({\n    context,\n    pluginOptions,\n    webpackConfig\n  });\n};\n\nmodule.exports = {\n  overrideWebpackConfig\n};"],"names":["loaderByName","removeLoaders","throwUnexpectedConfigError","require","CracoLessPlugin","path","overrideWebpackConfig","context","pluginOptions","webpackConfig","lessLoaderOptions","lessOptions","math","resolve","alias","join","paths","appSrc","oneOfRule","module","rules","find","rule","oneOf","packageName","message","env","resourceLoader","type","exclude","push","hasRemovedAny","exports"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAM;EACJA,YADI;EAEJC,aAFI;EAGJC;IACEC,OAAO,CAAC,cAAD,CAJX;;AAMA,MAAMC,eAAe,GAAGD,OAAO,CAAC,YAAD,CAA/B;;AAEA,MAAME,IAAI,GAAGF,OAAO,CAAC,MAAD,CAApB;;AAEA,MAAMG,qBAAqB,GAAG,CAAC;EAC7BC,OAD6B;EAE7BC,aAF6B;EAG7BC;CAH4B,KAIxB;EACJD,aAAa;IACXE,iBAAiB,EAAE;MACjBC,WAAW,EAAE;QACXC,IAAI,EAAE;;;KAGPJ,aANQ,CAAb,CADI;;EAUJC,aAAa,CAACI,OAAd,CAAsBC,KAAtB,CAA4B,qBAA5B,IAAqDT,IAAI,CAACU,IAAL,CAAUR,OAAO,CAACS,KAAR,CAAcC,MAAxB,EAAgC,2BAAhC,CAArD;QACMC,SAAS,GAAGT,aAAa,CAACU,MAAd,CAAqBC,KAArB,CAA2BC,IAA3B,CAAgCC,IAAI,IAAIA,IAAI,CAACC,KAA7C,CAAlB;;MAEI,CAACL,SAAL,EAAgB;IACdhB,0BAA0B,CAAC;MACzBsB,WAAW,EAAE,+BADY;MAEzBC,OAAO,EAAE,yDAA0D,GAAElB,OAAO,CAACmB,GAAI;KAFzD,CAA1B;;;QAMIC,cAAc,GAAGT,SAAS,CAACK,KAAV,CAAgBF,IAAhB,CAAqB,CAAC;IAC3CO;GAD0C,KAEtCA,IAAI,KAAK,gBAFQ,CAAvB;;MAII,CAACD,cAAL,EAAqB;IACnBzB,0BAA0B,CAAC;MACzBsB,WAAW,EAAE,+BADY;MAEzBC,OAAO,EAAE,oEAAqE,GAAElB,OAAO,CAACmB,GAAI;KAFpE,CAA1B;;;EAMFC,cAAc,CAACE,OAAf,CAAuBC,IAAvB,CAA4B,eAA5B;EACAH,cAAc,CAACE,OAAf,CAAuBC,IAAvB,CAA4B,cAA5B;EACAH,cAAc,CAACE,OAAf,CAAuBC,IAAvB,CAA4B,cAA5B,EAjCI;;;;QAqCE;IACJC;MACE9B,aAAa,CAACQ,aAAD,EAAgBT,YAAY,CAAC,oBAAD,CAA5B,CAFjB;;MAII,CAAC+B,aAAL,EAAoB;IAClB7B,0BAA0B,CAAC;MACzBsB,WAAW,EAAE,+BADY;MAEzBC,OAAO,EAAG,0CAAyClB,OAAO,CAACmB,GAAI;KAFvC,CAA1B;GA1CE;;;;SAkDGtB,eAAe,CAACE,qBAAhB,CAAsC;IAC3CC,OAD2C;IAE3CC,aAF2C;IAG3CC;GAHK,CAAP;CAtDF;;AA6DAU,MAAM,CAACa,OAAP,GAAiB;EACf1B;CADF"}